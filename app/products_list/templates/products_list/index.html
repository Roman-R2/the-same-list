{% extends "products_list/base.html" %}


{% block content %}

<div class="bg-light p-2 rounded">
    <div class="row">
        <div class="col-sm-4 mx-auto">
            <h5>Списки:</h5>
            <ul class="list-group list-group-flush" id="productLists">
                <!--                <a href="#" style="text-decoration: none;">-->
                <!--                    <li class="list-group-item">Test</li>-->
                <!--                </a>-->
            </ul>
        </div>
        <div class="col-sm-8 mx-auto">
            <h5>Продукты:</h5>
            <div class="input-group mb-3">
                <input type="text" class="form-control" placeholder="Добавьте новый товар в список..."
                       aria-label="Новый товар" aria-describedby="basic-addon2">
            </div>
            <div class="list-group" id="products">
                <!--                <label class="list-group-item">-->
                <!--                    <input class="form-check-input me-1" type="checkbox" value="">-->
                <!--                    First checkbox-->
                <!--                </label>-->
            </div>
        </div>
    </div>
</div>

<script>
  'use strict';
  let lists = {};

  {% for list in products_list %}
        lists[{{list.pk}}] = {
            'name': '{{list.title}}',
            'products': {
                {% for product in list.products.all %}
                '{{product.pk}}': '{{product.name}}',
                {% endfor %}
            },
          }
  {% endfor %}


    window.addEventListener('load', (event) => {

        if (Object.keys(lists).length === 0 && lists.constructor === Object){
            console.log('Нет списков');
        } else {
            var pl = new ProductList(lists);
            pl.init();
        }

    });






</script>

{% endblock content %}